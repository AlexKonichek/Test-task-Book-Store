(this["webpackJsonpbook-store"]=this["webpackJsonpbook-store"]||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(30),s=n.n(o),i=n(8),l=n(12),d=n(3),u=(n(68),function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}}),j=function(e,t){return function(){t({type:"FETCH_BOOKS_REQUEST"}),e.getBooks().then((function(e){return t({type:"FETCH_BOOKS_SUCCESS",payload:e})})).catch((function(e){return t({type:"FETCH_BOOKS_FAILURE",payload:e})}))}},b={onIncrease:u,onDecrease:function(e){return{type:"BOOK_REMOVED_FROM_CART",payload:e}},onDelete:function(e){return{type:"ALL_BOOKS_REMOVED_FROM_CART",payload:e}}},h=Object(i.b)((function(e){var t=e.shopingCart,n=t.cartItems,a=t.orderTotal;return{books:e.bookList.books,items:n,total:a}}),b)((function(e){var t=e.items,n=(e.books,e.onIncrease),c=e.onDecrease,r=e.onDelete;t.length>0&&Math.round(t.map((function(e){return e.total})).reduce((function(e,t){return e+t})));return Object(a.jsx)("div",{className:"wrap",children:Object(a.jsxs)("div",{className:"shopping-cart-table",children:[Object(a.jsx)("table",{className:"table table-responsive table-hover",children:Object(a.jsx)("tbody",{children:t.map((function(e){var t=e.id,o=e.title,s=e.count,i=e.total;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{className:"text-center",children:Object(a.jsx)("button",{onClick:function(){return c(t)},className:"btn btn-outline-warning btn-sm",children:Object(a.jsx)("i",{className:"fa fa-minus-circle"})})}),Object(a.jsx)("td",{className:"text-center",children:s}),Object(a.jsx)("td",{className:"text-center",children:Object(a.jsx)("button",{onClick:function(){return n(t)},className:"btn btn-outline-success btn-sm",children:Object(a.jsx)("i",{className:"fa fa-plus-circle"})})}),Object(a.jsxs)("td",{children:["$",(i/s).toFixed(2)]}),Object(a.jsxs)("td",{children:["$",i.toFixed(2)]}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:function(){return r(t)},className:"btn btn-outline-danger btn-sm",children:Object(a.jsx)("i",{className:"fa fa-trash-o"})})})]},t)}))})}),Object(a.jsx)("div",{className:"total"})]})})})),m=n(34),O=n(10),p=n(11),f=n(23),x=n(17),v=n(16),g=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(O.a)(this,n),(a=t.call(this,e)).state={name:"",surname:"",address:"",phone:""},a.handleNameChange=a.handleNameChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(p.a)(n,[{key:"handleSubmit",value:function(e){e.preventDefault();var t={items:this.props.items,customer:this.state},n=JSON.stringify(t);alert(n)}},{key:"handleNameChange",value:function(e){var t=e.target.attributes.placeholder.nodeValue.toLowerCase();this.setState(Object(m.a)({},t,e.target.value))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"wrapper",children:Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{className:"form-control",id:"Name",type:"text",placeholder:"NAME",value:this.state.name,onChange:this.handleNameChange})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{className:"form-control",id:"Surname",type:"text",placeholder:"SURNAME",value:this.state.surname,onChange:this.handleNameChange})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{className:"form-control",id:"ADDRESS",type:"text",placeholder:"ADDRESS",value:this.state.address,onChange:this.handleNameChange})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{className:"form-control",id:"PHONE",type:"text",placeholder:"PHONE",value:this.state.phone,onChange:this.handleNameChange})}),Object(a.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:"ORDER"})]})})}}]),n}(c.Component),N=Object(i.b)((function(e){var t=e.shopingCart;return{items:t.cartItems,total:t.orderTotal}}))(g),C=(n(69),function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)(l.b,{to:"/",className:"text-decoration-none",children:"Book Store"})}),Object(a.jsxs)("div",{className:"d-flex justify-content-center p-2 bd-highlight",children:[Object(a.jsx)("div",{className:"p-2 bd-highlight stretch",children:Object(a.jsx)(h,{})}),Object(a.jsx)("div",{className:"p-2 bd-highlight stretch",children:Object(a.jsx)(N,{onSubmit:function(){console.log("submit")}})})]})]})}),_=function(e){var t=e.book,n=e.onAddedToCart,c=t.author,r=t.title,o=t.price,s=t.coverImage;return Object(a.jsxs)("div",{className:"card card-size text-justify",children:[Object(a.jsx)("div",{className:"mr-auto",children:Object(a.jsx)("img",{src:s,className:"card-img-top",alt:"cover"})}),Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h5",{className:"card-title",children:r}),Object(a.jsx)("h6",{className:"card-title",children:c}),Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)("div",{className:"p-2",children:Object(a.jsxs)("span",{className:"badge badge-dark",children:[o,"$"]})}),Object(a.jsx)("div",{className:"p-2",children:Object(a.jsx)("span",{className:"badge badge-info",children:Object(a.jsx)("button",{onClick:n,className:"btn btn-info add-to-cart",children:"Add to cart"})})})]})]})]})},y=n(44),k=r.a.createContext(),S=k.Provider,A=k.Consumer,E=function(){return function(e){return function(t){return Object(a.jsx)(A,{children:function(n){return Object(a.jsx)(e,Object(y.a)(Object(y.a)({},t),{},{bookstoreService:n}))}})}}},R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},T=(n(71),function(){return Object(a.jsx)("div",{className:"container center",children:Object(a.jsx)("div",{className:"lds-css",children:Object(a.jsxs)("div",{className:"lds-double-ring",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})})}),I=(n(72),function(){return Object(a.jsxs)("div",{className:"error-indicator",children:[Object(a.jsx)("h1",{className:"boom",children:"BOOM!"}),Object(a.jsx)("span",{children:"something has gone terribly wrong"})]})}),B=(n(73),function(e){var t=e.books,n=e.onAddedToCart;return Object(a.jsx)("div",{className:"wrapper",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("div",{className:"row",children:t.map((function(e){return Object(a.jsx)("div",{className:"col-sm-4",children:Object(a.jsx)(_,{book:e,onAddedToCart:function(){return n(e.id)}})},e.id)}))})})})}),D=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.loading,c=e.error,r=e.onAddedToCart;return n?(console.log("loading",n),Object(a.jsx)(T,{})):c?Object(a.jsx)(I,{}):Object(a.jsx)(B,{books:t,onAddedToCart:r})}}]),n}(c.Component),L=R(E(),Object(i.b)((function(e){var t=e.bookList;return{books:t.books,loading:t.loading,error:t.error}}),(function(e,t){var n=t.bookstoreService;return{fetchBooks:j(n,e),onAddedToCart:function(t){return e(u(t))}}})))(D),w=(n(74),Object(i.b)((function(e){var t=e.shopingCart;return{items:t.cartItems,total:t.orderTotal}}))((function(e){var t=e.items,n=(e.total,null),c=null;return t.length>0&&(n=Math.round(t.map((function(e){return e.total})).reduce((function(e,t){return e+t})))+"$",c=t.map((function(e){return e.count})).reduce((function(e,t){return e+t}))),Object(a.jsxs)("header",{className:"shop-header row fixed-top",children:[Object(a.jsx)(l.b,{to:"/",className:"text-decoration-none",children:Object(a.jsx)("div",{className:"logo",children:"Book Store"})}),Object(a.jsx)(l.b,{to:"/cart",className:"text-decoration-none",children:Object(a.jsxs)("div",{className:"shopping-cart",children:[Object(a.jsx)("i",{className:"cart-icon fa fa-shopping-cart fa-2x mr-5"}),Object(a.jsx)("span",{className:"circle",children:c}),Object(a.jsxs)("b",{children:["Total: ",n]})]})})]})}))),F=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(w,{}),Object(a.jsx)(L,{})]})},M=(n(75),function(){return Object(a.jsx)("main",{role:"main",className:"",children:Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{path:"/",component:F,exact:!0}),Object(a.jsx)(d.a,{path:"/cart",component:C})]})})}),K=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(p.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(a.jsx)(I,{}):this.props.children}}]),n}(c.Component),U=function(){function e(){Object(O.a)(this,e),this.data=[{id:1,title:"Learning React: Modern Patterns for Developing React Apps",author:"Alex Banks",price:36.49,coverImage:"https://m.media-amazon.com/images/I/91uFdkCJmAL._AC_UY436_QL65_.jpg"},{id:2,title:"The Road to React: Your journey to master plain yet pragmatic React.js",author:"Robin Wieruch",price:29.99,coverImage:"https://m.media-amazon.com/images/I/51oZCDb0JNL._AC_UY436_QL65_.jpg"},{id:3,title:"React: Functional Web Development",author:"Alex Banks",price:49.99,coverImage:"https://m.media-amazon.com/images/I/7169mYAhsmL._AC_UY436_QL65_.jpg"},{id:4,title:"Learning React: A Hands-On Guide to Building Web Applications",author:"Kirupa Chinnathambi ",price:17.27,coverImage:"https://m.media-amazon.com/images/I/51bBG0BOZwL._AC_UY436_QL65_.jpg"},{id:5,title:"Fullstack React: The Complete Guide to ReactJS and Friends",author:"Anthony Accomazzo,",price:59.88,coverImage:"https://m.media-amazon.com/images/I/71Yd2ACrDcL._AC_UY436_QL65_.jpg"},{id:6,title:"Production-Ready Microservices by Susan J. Fowler ",author:"Susan J. Fowler",price:32,coverImage:"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg"}]}return Object(p.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){t(e.data),n(new Error("OOpps"))}),1e3)}))}}]),e}(),J=n(33),z=n(18),H=function(e,t,n){return 0===t.count?[].concat(Object(z.a)(e.slice(0,n)),Object(z.a)(e.slice(n+1))):-1===n?[].concat(Object(z.a)(e),[t]):[].concat(Object(z.a)(e.slice(0,n)),[t],Object(z.a)(e.slice(n+1)))},Y=function(e,t,n){var a=e.bookList.books,c=e.shopingCart.cartItems,r=a.find((function(e){return e.id===t})),o=c.findIndex((function(e){return e.id===t})),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=t.id,c=void 0===a?e.id:a,r=t.count,o=void 0===r?0:r,s=t.title,i=void 0===s?e.title:s,l=t.total;return{id:c,title:i,count:o+n,total:(void 0===l?0:l)+n*e.price}}(r,c[o],n);return{orderTotal:0,cartItems:H(c,s,o)}},Q=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0};switch(t.type){case"BOOK_ADDED_TO_CART":return Y(e,t.payload,1);case"BOOK_REMOVED_FROM_CART":return Y(e,t.payload,-1);case"ALL_BOOKS_REMOVED_FROM_CART":var n=e.shopingCart.cartItems.find((function(e){return e.id===t.payload}));return Y(e,t.payload,-n.count);default:return e.shopingCart}},P=function(e,t){if(void 0===e)return{books:[],loading:!0,error:null};switch(t.type){case"FETCH_BOOKS_REQUEST":return{books:[],loading:!0,error:null};case"FETCH_BOOKS_SUCCESS":return{books:t.payload,loading:!1,error:null};case"FETCH_BOOKS_FAILURE":return{books:[],loading:!1,error:t.payload};default:return e.bookList}},V=n(152),$=function(e,t){return{bookList:P(e,t),shopingCart:Q(e,t),forms:Object(V.a)(e,t)}},G=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}().state,W=Object(J.b)($,G);W.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}}({state:W.getState()}),console.log(W.getState())}));var Z=W,X=new U;s.a.render(Object(a.jsx)(i.a,{store:Z,children:Object(a.jsx)(K,{children:Object(a.jsx)(S,{value:X,children:Object(a.jsx)(l.a,{children:Object(a.jsx)(M,{})})})})}),document.getElementById("root"))},68:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.ed498c20.chunk.js.map