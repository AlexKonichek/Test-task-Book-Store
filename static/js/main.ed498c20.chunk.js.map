{"version":3,"sources":["actions/index.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/shopping-cart-form/shopping-cart-form.js","components/shopping-cart-form/index.js","components/pages/cartPage.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","utils/compose.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/pages/homePage.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/shoppingCart.js","reducers/bookList.js","reducers/index.js","store.js","localStorage.js","index.js"],"names":["bookAddedToCart","bookId","type","payload","fetchBooks","bookstoreService","dispatch","getBooks","then","data","catch","err","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","connect","shopingCart","cartItems","orderTotal","books","bookList","items","total","length","Math","round","map","item","reduce","acc","cur","className","id","title","count","onClick","toFixed","shoppingCartForm","props","state","name","surname","address","phone","handleNameChange","bind","handleSubmit","event","preventDefault","this","customer","seriallyzeData","JSON","stringify","alert","key","target","attributes","placeholder","nodeValue","toLowerCase","setState","value","onSubmit","onChange","Component","ShoppingCartForm","CartPage","to","console","log","BookListItem","book","onAddedToCart","author","price","coverImage","src","alt","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","compose","funcs","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","BookListContainer","loading","error","ShopHeader","totalAll","itemsNum","HomePage","App","role","path","component","exact","ErrorBoundry","hasError","children","BookstoreService","Promise","resolve","reject","setTimeout","Error","updateCartItems","idx","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateShoppingCart","action","undefined","updateBookList","reducer","forms","formReducer","persistedState","serializedState","localStorage","getItem","parse","loadState","store","createStore","subscribe","setItem","saveState","getState","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ed498c20.chunk.js","sourcesContent":["const booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST'\r\n  }\r\n};\r\n\r\nconst booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks\r\n  };\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error\r\n  };\r\n};\r\n\r\nexport const bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_ADDED_TO_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const bookRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_REMOVED_FROM_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const allBooksRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst fetchBooks = (bookstoreService,dispatch) => () => {\r\n  dispatch(booksRequested());\r\n  bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err)));\r\n};\r\n\r\nexport {\r\n  fetchBooks\r\n};","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './shopping-cart-table.css';\r\n\r\n\r\nimport { allBooksRemovedFromCart,\r\n         bookRemovedFromCart,\r\n         bookAddedToCart } from '../../actions';\r\n\r\nconst ShoppingCartTable = ({ items, books, onIncrease, onDecrease, onDelete }) => {\r\n  let totalAll;\r\n  \r\n  if(items.length>0){\r\n    totalAll = Math.round(items.map((item) => item.total).reduce((acc,cur) => acc+cur));\r\n  }\r\n  \r\n  const renderRow = (item) => {\r\n    const { id, title, count, total } = item\r\n    return (\r\n      <tr key={id}>\r\n        <td>{title}</td>\r\n        <td className=\"text-center\">\r\n        <button\r\n            onClick={() => onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm\">\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n        <td className=\"text-center\">{count}</td>\r\n        <td className=\"text-center\">\r\n          <button\r\n            onClick={() => onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm\">\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button></td>\r\n        <td>${(total/count).toFixed(2)}</td>\r\n        <td>${(total.toFixed(2))}</td>\r\n        <td>\r\n          <button\r\n            onClick={() => onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm\">\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"wrap\">\r\n    <div className=\"shopping-cart-table\">\r\n      \r\n      <table className=\"table table-responsive table-hover\">\r\n        <tbody>\r\n        { items.map(renderRow) }\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">\r\n        {/* Total all: ${(totalAll).toFixed(2)} */}\r\n      </div>\r\n    </div>\r\n    </div>\r\n\r\n    \r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shopingCart :{ cartItems, orderTotal }, bookList: { books } }) => {\r\n  return {\r\n    books,\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onIncrease: bookAddedToCart,\r\n    onDecrease: bookRemovedFromCart ,\r\n    onDelete: allBooksRemovedFromCart\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);","import ShoppingCartTable from './shopping-cart-table';\r\nexport default ShoppingCartTable;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass shoppingCartForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: '',\r\n      surname: '',\r\n      address: '',\r\n      phone: ''\r\n    };\r\n    \r\n    this.handleNameChange = this.handleNameChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    let data = {\r\n      items:this.props.items,\r\n      customer:this.state\r\n    }\r\n    let seriallyzeData = JSON.stringify(data);\r\n    alert(seriallyzeData);\r\n  }\r\n\r\n  \r\n  handleNameChange(event) {\r\n    let key = event.target.attributes.placeholder.nodeValue.toLowerCase();\r\n    this.setState({[key]: event.target.value});\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <form onSubmit={this.handleSubmit}>\r\n        <div className=\"mb-3\">\r\n            <input \r\n              className=\"form-control\" \r\n              id=\"Name\"\r\n              type=\"text\"\r\n              placeholder=\"NAME\"\r\n              value={this.state.name}\r\n              onChange={this.handleNameChange}/>\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            \r\n            <input \r\n              className=\"form-control\" \r\n              id=\"Surname\"\r\n              type=\"text\"\r\n              placeholder=\"SURNAME\"\r\n              value={this.state.surname}\r\n              onChange={this.handleNameChange}/>\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            \r\n            <input \r\n              className=\"form-control\" \r\n              id=\"ADDRESS\"\r\n              type=\"text\"\r\n              placeholder=\"ADDRESS\"\r\n              value={this.state.address}\r\n              onChange={this.handleNameChange}/>\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            \r\n            <input \r\n              className=\"form-control\" \r\n              id=\"PHONE\"\r\n              type=\"text\"\r\n              placeholder=\"PHONE\"\r\n              value={this.state.phone}\r\n              onChange={this.handleNameChange}/>\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-primary w-100\">ORDER</button>\r\n      </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ shopingCart :{ cartItems, orderTotal } }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps)(shoppingCartForm);","import ShoppingCartForm from './shopping-cart-form';\r\n\r\nexport default ShoppingCartForm;","import React from 'react';\r\nimport ShopCartTable from '../shopping-cart-table';\r\nimport ShopCartForm from '../shopping-cart-form';\r\nimport { Link } from 'react-router-dom';\r\nimport './pages.css'\r\n\r\n\r\n\r\nconst CartPage = () => {\r\n    return (\r\n    <div className=\"container\">\r\n        <div className=\"logo\">\r\n            <Link to=\"/\" className=\"text-decoration-none\">Book Store</Link>\r\n        </div>\r\n        <div className=\"d-flex justify-content-center p-2 bd-highlight\">\r\n        <div className=\"p-2 bd-highlight stretch\">\r\n            <ShopCartTable/>\r\n        </div>\r\n        <div className=\"p-2 bd-highlight stretch\">\r\n            <ShopCartForm onSubmit={()=>{console.log('submit')}}/>\r\n        </div>\r\n    </div>\r\n    </div>\r\n    \r\n           \r\n    )\r\n\r\n    \r\n}\r\nexport default CartPage;","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;","import React from 'react';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n   const { author, title, price, coverImage} = book;\r\n   return (  \r\n            <div className=\"card card-size text-justify\">\r\n              <div className=\"mr-auto\">\r\n                <img src={coverImage} className=\"card-img-top\" alt=\"cover\"/>\r\n                </div>\r\n            \r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">{title}</h5>\r\n                  <h6 className=\"card-title\">{author}</h6>\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <div className=\"p-2\">\r\n                      <span className=\"badge badge-dark\">{price}$</span>\r\n                    </div>\r\n                    <div className=\"p-2\">\r\n                      <span className=\"badge badge-info\">\r\n                        <button\r\n                          onClick={onAddedToCart}\r\n                          className=\"btn btn-info add-to-cart\">\r\n                          Add to cart\r\n                        </button>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  \r\n                    \r\n                    \r\n                </div>\r\n            </div>\r\n          )\r\n}\r\n\r\nexport default BookListItem;","import React from 'react';\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n}","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return (<Wrapped {...props}\r\n                     bookstoreService={bookstoreService}/>);\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withBookstoreService;","\r\nconst compose = (...funcs) => (comp) => {\r\n    return funcs.reduceRight(\r\n      (wrapped, f) => f(wrapped), comp);\r\n  };\r\n  \r\n  export default compose;","import Spinner from './spinner';\r\n\r\nexport default Spinner;","import React from 'react';\r\n\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"container center\">\r\n      <div className=\"lds-css\">\r\n      <div className=\"lds-double-ring\">\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n    \r\n  );\r\n};\r\n\r\nexport default Spinner;","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\n\r\nimport './error-indicator.css';\r\n\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n    <div className=\"error-indicator\">\r\n\r\n      <h1 className=\"boom\">BOOM!</h1>\r\n      <span>\r\n        something has gone terribly wrong\r\n      </span>\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorIndicator;","import React, { Component } from 'react';\r\nimport BookListItem from '../book-list-item';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withBookstoreService } from '../hoc';\r\nimport { fetchBooks, bookAddedToCart } from '../../actions';\r\nimport { compose } from '../../utils';\r\n\r\n\r\nimport Spinner from '../spinner';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nimport './book-list.css';\r\n\r\nconst BookList = ({books, onAddedToCart}) => {\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n          {books.map((book) => {\r\n              return (\r\n                <div className=\"col-sm-4\" key={book.id}>\r\n                  <BookListItem\r\n                    book={book}\r\n                    onAddedToCart={() => onAddedToCart(book.id)}/>\r\n                </div>\r\n                \r\n              );\r\n            })\r\n          }\r\n          </div>\r\n          \r\n        </div>\r\n      </div>  \r\n      );\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      console.log(\"loading\", loading)\r\n      return <Spinner />;\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart} />\r\n\r\n    \r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n  return { books, loading, error };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n    return {\r\n        fetchBooks: fetchBooks(bookstoreService, dispatch),\r\n        onAddedToCart: (id)=> dispatch(bookAddedToCart(id))\r\n    }\r\n}\r\n  \r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);","import BookListContainer from './book-list';\r\n\r\nexport default BookListContainer;","import ShopHeader from './shop-header'\r\n\r\nexport default ShopHeader;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport './shop-header.css'\r\n\r\nconst ShopHeader = ({items, total}) => {\r\n    let totalAll = null;\r\n    let itemsNum = null;\r\n    if(items.length>0){\r\n        totalAll = Math.round(items.map((item) => item.total).reduce((acc,cur) => acc+cur)) +'$';\r\n        itemsNum = items.map((item) => item.count).reduce((acc,cur) => acc+cur);\r\n        \r\n\r\n    }\r\n\r\n   \r\n    return (\r\n        <header className=\"shop-header row fixed-top\">\r\n            <Link to=\"/\" className=\"text-decoration-none\">\r\n            <div className=\"logo\">Book Store</div>\r\n            </Link>\r\n            <Link to=\"/cart\" className=\"text-decoration-none\">\r\n            <div className=\"shopping-cart\">\r\n                <i className=\"cart-icon fa fa-shopping-cart fa-2x mr-5\" />\r\n                <span className=\"circle\">{itemsNum}</span>\r\n                \r\n                <b>Total: {totalAll}</b>\r\n            </div>\r\n            </Link>\r\n            \r\n\r\n        </header>\r\n\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ shopingCart :{ cartItems, orderTotal } }) => {\r\n    return {\r\n      items: cartItems,\r\n      total: orderTotal\r\n    };\r\n  };\r\n  \r\n  \r\n  export default connect(mapStateToProps)(ShopHeader);","import React from 'react';\r\nimport BookList from '../book-list';\r\nimport ShopHeader from '../shop-header'\r\n\r\n\r\n\r\nconst HomePage = () => {\r\n    return (\r\n      <div>\r\n        <ShopHeader/>\r\n        <BookList/>\r\n\r\n        \r\n      </div>\r\n    \r\n  )\r\n\r\n    \r\n}\r\nexport default HomePage;","import App from './app';\r\n\r\nexport default App;","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport { HomePage, CartPage } from '../pages';\r\n\r\nimport './app.css';\r\n\r\nconst App = () => {\r\n  return (\r\n    <main role=\"main\" className=\"\">\r\n      <Switch>\r\n        <Route\r\n          path=\"/\"\r\n          component={HomePage}\r\n          exact />\r\n\r\n        <Route\r\n          path=\"/cart\"\r\n          component={CartPage}\r\n          />\r\n      </Switch>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({ hasError: true });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}","export default class BookstoreService {\r\n\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: 'Learning React: Modern Patterns for Developing React Apps',\r\n      author: 'Alex Banks',\r\n      price: 36.49,\r\n      coverImage: 'https://m.media-amazon.com/images/I/91uFdkCJmAL._AC_UY436_QL65_.jpg'\r\n    },\r\n    {\r\n      id: 2,\r\n      title: 'The Road to React: Your journey to master plain yet pragmatic React.js',\r\n      author: 'Robin Wieruch',\r\n      price: 29.99,\r\n      coverImage: 'https://m.media-amazon.com/images/I/51oZCDb0JNL._AC_UY436_QL65_.jpg'\r\n    },\r\n    {\r\n      id: 3,\r\n      title: 'React: Functional Web Development',\r\n      author: 'Alex Banks',\r\n      price: 49.99,\r\n      coverImage: 'https://m.media-amazon.com/images/I/7169mYAhsmL._AC_UY436_QL65_.jpg'\r\n    },\r\n    {\r\n      id: 4,\r\n      title: 'Learning React: A Hands-On Guide to Building Web Applications',\r\n      author: 'Kirupa Chinnathambi ',\r\n      price: 17.27,\r\n      coverImage: 'https://m.media-amazon.com/images/I/51bBG0BOZwL._AC_UY436_QL65_.jpg'\r\n    },\r\n    {\r\n      id: 5,\r\n      title: 'Fullstack React: The Complete Guide to ReactJS and Friends',\r\n      author: 'Anthony Accomazzo,',\r\n      price: 59.88,\r\n      coverImage: 'https://m.media-amazon.com/images/I/71Yd2ACrDcL._AC_UY436_QL65_.jpg'\r\n    },\r\n    {\r\n      id: 6,\r\n      title: 'Production-Ready Microservices by Susan J. Fowler ',\r\n      author: 'Susan J. Fowler',\r\n      price: 32,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'\r\n    }\r\n    \r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        resolve(this.data);\r\n        reject(new Error('OOpps'))\r\n        \r\n      },1000);\r\n    });\r\n  }\r\n}","const updateCartItems = (cartItems, item, idx) => {\r\n    //delete items\r\n     if (item.count === 0) {\r\n       return [\r\n         ...cartItems.slice(0, idx),\r\n         ...cartItems.slice(idx + 1)\r\n       ];\r\n     }\r\n    //add items\r\n     if (idx === -1) {\r\n       return [\r\n         ...cartItems,\r\n         item\r\n       ];\r\n     }\r\n     //update arr\r\n     return [\r\n       ...cartItems.slice(0, idx),\r\n       item,\r\n       ...cartItems.slice(idx + 1)\r\n     ];\r\n   };\r\n   \r\n   const updateCartItem = (book, item = {}, quantity) => {\r\n   \r\n     const {\r\n       id = book.id,\r\n       count = 0,\r\n       title = book.title,\r\n       total = 0 } = item;\r\n   \r\n     return {\r\n       id,\r\n       title,\r\n       count: count + quantity,\r\n       total: total + quantity*book.price\r\n     };\r\n   };\r\n   \r\n   const updateOrder = (state, bookId, quantity) => {\r\n     const {bookList: { books} , shopingCart: {cartItems} } = state;\r\n   \r\n     const book = books.find(({id}) => id === bookId);\r\n     const itemIndex = cartItems.findIndex(({id}) => id === bookId);\r\n     const item = cartItems[itemIndex];\r\n   \r\n     const newItem = updateCartItem(book, item, quantity);\r\n     return {\r\n       orderTotal:0,\r\n       cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n     };\r\n   };\r\n   \r\n   const updateShoppingCart = (state, action) => {\r\n     if(state === undefined) {\r\n       return {\r\n           cartItems: [],\r\n           orderTotal: 0\r\n       }\r\n     }\r\n   \r\n     switch (action.type) {\r\n       case 'BOOK_ADDED_TO_CART':\r\n         return updateOrder(state, action.payload, 1);\r\n   \r\n       case 'BOOK_REMOVED_FROM_CART':\r\n         return updateOrder(state, action.payload, -1);\r\n   \r\n       case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n         const item = state.shopingCart.cartItems.find(({id}) => id === action.payload);\r\n         return updateOrder(state, action.payload, -item.count);\r\n   \r\n       default:\r\n         return state.shopingCart;\r\n     }\r\n   \r\n   }\r\n\r\n   export default updateShoppingCart;","const updateBookList = (state, action) => {\r\n    if(state === undefined) {\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null,\r\n      }\r\n    }\r\n    switch (action.type) {\r\n      case 'FETCH_BOOKS_REQUEST':\r\n        return {\r\n          books: [],\r\n          loading: true,\r\n          error: null\r\n        };\r\n  \r\n      case 'FETCH_BOOKS_SUCCESS':\r\n        return {\r\n          books: action.payload,\r\n          loading: false,\r\n          error: null\r\n        };\r\n  \r\n      case 'FETCH_BOOKS_FAILURE':\r\n        return {\r\n          books: [],\r\n          loading: false,\r\n          error: action.payload\r\n        };\r\n      default:return state.bookList\r\n    }\r\n  \r\n  }\r\n\r\nexport default updateBookList;","import updateShoppingCart from './shoppingCart';\r\nimport updateBookList from './bookList';\r\nimport { reducer as formReducer} from 'redux-form';\r\n\r\n\r\n\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shopingCart: updateShoppingCart(state, action),\r\n    forms:formReducer(state,action)\r\n  };\r\n};\r\n\r\nexport default reducer;","import { createStore} from 'redux';\r\nimport {loadState, saveState } from './localStorage'\r\nimport  reducer from './reducers';\r\n\r\n\r\nconst data = loadState();\r\nconst persistedState = data.state;\r\n\r\nconst store = createStore(reducer, persistedState);\r\n\r\nstore.subscribe(() => {\r\n  saveState({\r\n    state:store.getState()\r\n  });\r\n  console.log(store.getState())\r\n});\r\n\r\nexport default store;","export const loadState = () => {\r\n    try {\r\n      const serializedState = localStorage.getItem('state');\r\n      if (serializedState === null) {\r\n        return undefined;\r\n      }\r\n      return JSON.parse(serializedState);\r\n    } catch (err) {\r\n      return undefined;\r\n    }\r\n  }; \r\n\r\n  export const saveState = (state) => {\r\n    try {\r\n      \r\n      const serializedState = JSON.stringify(state);\r\n      localStorage.setItem('state', serializedState);\r\n    } catch {\r\n      // ignore write errors\r\n    }\r\n  };","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './components/app';\r\nimport ErrorBoundry from './components/error-boundry';\r\nimport BookstoreService from './services/bookstore-service';\r\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\r\n\r\nimport store from './store';\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\n\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ErrorBoundry>\r\n      <BookstoreServiceProvider value={bookstoreService}>\r\n        <Router>\r\n          <App />\r\n        </Router>\r\n      </BookstoreServiceProvider>\r\n    </ErrorBoundry>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}